<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- CSS STYLES -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href='https://fonts.googleapis.com/css?family=Bungee Shade' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Monoton' rel='stylesheet'>
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="styles/style.css">

  <title>Liar's Dice Online</title>
</head>

<body>
  <div id="app">
    <div class="display center">

      <!-- Start Screen -->
      <div v-if="screen == 'start'" class="center">
        <div class="block">
          <h1 class="title">Liar's Dice</h1>
          <br>
          <div>Choose an option:</div>
          <br>
          <button type="button" @click="signUpScreen()">Sign Up</button>
          <button type="button" @click="logInScreen()">Log In</button>
          <br>
          <br>
        </div>
      </div>

      <!-- Sign Up Screen -->
      <div v-if="screen == 'signup'" class="center">
        <div class="block">
          <h1 class="title">Liar's Dice</h1>
          <br>
          <br>
          <form>
            <div>Please enter your desired screen name:</div>
            <input v-model="username" type="text">
            <br>
            <br>
            <div>Please enter your desired password:</div>
            <input v-model="password" type="password">
            <br>
            <br>
            <button type="button" v-if="available && credentialsReady" @click="addNewUser()">Submit</button>
            <button type="button" v-else class="disabled">Submit</button>
          </form>
          <br>
          <br>
          <div v-if="!available" class="error">That username is already in use. Please choose another.</div>
          <br>
          <div>(Please note that at the moment this is extremely insecure, and your password is essentially visible to anyone, so just use something like "12345".)</div>
          <br>
          <div><span class="clickable" @click="startScreen()">Go Back</span> or <span class="clickable" @click="logInScreen()">Log In</span> instead.</div>
        </div>
      </div>

      <!-- Login Screen -->
      <div v-if="screen == 'login'" class="center">
        <div class="block">
          <h1 class="title">Liar's Dice</h1>
          <br>
          <br>
          <form>
            <div>Please enter your username:</div>
            <input v-model="username" type="text"><br><br>
            <div>Please enter your password:</div>
            <input v-model="password" type="password"><br><br>
            <button type="button" @click="logIn()">Submit</button>
          </form>
          <br><br>
          <div v-if="logInError == 'username'" class="error">The username doesn't exist. Please try again.</div>
          <div v-if="logInError == 'password'" class="error">The password is incorrect. Please try again.</div><br>
          <div><span class="clickable" @click="startScreen()">Go Back</span> or <span class="clickable" @click="signUpScreen()">Sign Up</span> instead.</div>
        </div>
      </div>

      <!-- Waiting Room Screen -->
      <div v-if="screen == 'waiting'" class="center">
        <div class="block">
          <h1 class="title">Liar's Dice</h1>
          <br>
          <div>Welcome, {{ username }}!</div>
          <button type="button" v-if="!currentUser.ready" @click="getReady">Ready!</button>
          <br>
          <div v-if="everyoneReady">Everyone is ready! Enjoy your game!</div>
          <div v-else>Waiting for other players...</div>
          <div>
            <waiting-room v-for="user in waitingUsers" v-bind="user"></waiting-room>
          </div>
        </div>
      </div>

      <!-- Game Screen -->
      <div v-if="screen == 'game'" class="center">
        <div class="block">
          <h1 class="title">Liar's Dice</h1>
          <br>
          <div>Welcome, {{ username }}! THIS IS THE GAME SCREEN</div>
          <br>
          <div>
            <waiting-room v-for="user in waitingUsers" v-bind="user"></waiting-room>
          </div>
        </div>
      </div>

    <!-- Finish Vue -->
    </div>
  </div>

  <!-- SCRIPTS -->

  <!-- Firebase Configuration -->
  <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyDOlAwdbcUaZ5c8ghdbA9I2W1kKgsoLFw8",
      authDomain: "liars-dice-dmz.firebaseapp.com",
      databaseURL: "https://liars-dice-dmz.firebaseio.com",
      projectId: "liars-dice-dmz",
      storageBucket: "liars-dice-dmz.appspot.com",
      messagingSenderId: "343396169646",
      appId: "1:343396169646:web:249207e90fca28502c3a3f"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script type="text/javascript" src="scripts/script.js"></script>
</body>

</html>
